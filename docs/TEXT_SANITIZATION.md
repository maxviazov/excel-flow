# Очистка текста для Министерства здравоохранения

## Проблемы

Система Министерства здравоохранения Израиля отклоняет файлы с:
1. HTML-entities в тексте (например: `&#39;`, `&quot;`)
2. Названиями на английском языке вместо иврита
3. Неправильным форматом даты (строка вместо datetime)
4. Пустыми полями вместо нулевых значений

## Решения

Создан модуль `internal/textutil` для автоматической очистки и транслитерации текста.

### Функции

#### CleanText
Удаляет HTML entities из текста:
- `&#39;` → `'`
- `&quot;` → `"`

#### TransliterateToHebrew
Транслитерирует английский текст в иврит:
- `Maximil` → `מאקסימיל`
- Если текст уже содержит иврит, не изменяется

#### SanitizeForMOH
Комбинирует обе функции для полной очистки текста.

## Применение

Очистка применяется автоматически к:
- Названиям клиентов (`client_name_he`)
- Адресам (`client_address`)

Обработка происходит в:
- `internal/pipelines/group.go` - при построении групп
- `internal/writer/moh.go` - при записи в Excel

### Исправления формата данных

1. **Дата**: Записывается как datetime объект вместо строки
2. **Branch number (col 13)**: Записывается 0 вместо пустого значения

## Примеры

### HTML entities
```
Вход:  סופר פאפא - סניף רח&#39; שבי ציון
Выход: סופר פאפא - סניף רח' שבי ציון
```

### Транслитерация
```
Вход:  Maximil
Выход: מאקסימיל
```

### Комбинированный пример
```
Вход:  Test &quot;Company&quot;
Выход: טאסט "קומפאני"
```
