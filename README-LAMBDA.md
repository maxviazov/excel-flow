# –î–µ–ø–ª–æ–π –Ω–∞ AWS Lambda

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AWS credentials
```bash
aws configure
# –í–≤–µ–¥–∏—Ç–µ AWS Access Key ID, Secret Access Key, region (us-east-1)
```

### 2. –î–µ–ø–ª–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash
./deploy-lambda.sh
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Terraform –≤—ã–≤–µ–¥–µ—Ç –∑–∞–ø–∏—Å–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:
```
certificate_validation_api = {
  "fish.viazov.dev" = {
    name  = "_xxx.fish.viazov.dev"
    type  = "CNAME"
    value = "yyy.acm-validations.aws."
  }
}
```

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ CNAME –∑–∞–ø–∏—Å–∏ –≤ DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞.

### 4. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –Ω–∞ CloudFront
–ü–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–æ–±–∞–≤—å—Ç–µ CNAME –∑–∞–ø–∏—Å—å:
```
fish.viazov.dev -> d1234567890.cloudfront.net
```

### 5. –î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```bash
cd frontend && ./deploy-s3-lambda.sh
```

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

- **Lambda**: $0 –∑–∞ –ø–µ—Ä–≤—ã–π 1M –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–µ—Å—è—Ü
- **API Gateway**: $0 –∑–∞ –ø–µ—Ä–≤—ã–π 1M –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–µ—Å—è—Ü  
- **S3**: ~$0.02 –∑–∞ GB –≤ –º–µ—Å—è—Ü
- **CloudFront**: $0.085 –∑–∞ –ø–µ—Ä–≤—ã–µ 10TB —Ç—Ä–∞—Ñ–∏–∫–∞

**–ò—Ç–æ–≥–æ**: ~$1-2 –≤ –º–µ—Å—è—Ü –ø—Ä–∏ —Ä–µ–¥–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
go run cmd/server/main.go

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Lambda —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ
go run cmd/lambda/main.go
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `cmd/lambda/` - Lambda —Ñ—É–Ω–∫—Ü–∏—è
- `terraform/lambda.tf` - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ AWS
- `frontend/` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è S3
- `deploy-lambda.sh` - —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è

## üåê URL

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
**https://fish.viazov.dev**